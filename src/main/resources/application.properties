# ============================================
# APPLICATION BASE CONFIG
# ============================================
quarkus.application.name=url-service

# Disable Dev Services globally
quarkus.devservices.enabled=false

# HTTP
quarkus.http.port=8080
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Authorization,Content-Type
quarkus.http.cors.exposed-headers=X-Total-Count

# ============================================
# DATABASE (PostgreSQL)
# ============================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=admin
quarkus.datasource.password=admin123
quarkus.datasource.jdbc.url=jdbc:postgresql://postgres:5432/url_shortener
quarkus.datasource.jdbc.max-size=50
quarkus.datasource.jdbc.min-size=10
quarkus.datasource.devservices.enabled=false

# Hibernate ORM
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.format-sql=true

# ============================================
# VALKEY (Redis)
# ============================================
quarkus.redis.hosts=redis://valkey:6379
quarkus.redis.client-type=standalone
quarkus.redis.timeout=3s
quarkus.redis.max-pool-size=100
quarkus.redis.devservices.enabled=false

# ============================================
# PULSAR (Message Broker)
# ============================================
quarkus.pulsar.client.serviceUrl=pulsar://pulsar:6650

# ============================================
# KEYCLOAK (OIDC)
# ============================================
quarkus.oidc.auth-server-url=http://keycloak:8080/realms/url-shortener
quarkus.oidc.client-id=shortener-backend
quarkus.oidc.credentials.secret=**my sec keyyyy**
quarkus.oidc.tls.verification=none
quarkus.oidc.token.issuer=http://keycloak:8080/realms/url-shortener
quarkus.oidc.token.audience=account

# ============================================
# SECURITY
# ============================================
quarkus.security.users.embedded.enabled=false

# Public endpoints (no auth required)
quarkus.http.auth.permission.public-swagger.paths=/q/swagger-ui/*
quarkus.http.auth.permission.public-swagger.policy=permit
quarkus.http.auth.permission.public-openapi.paths=/q/openapi
quarkus.http.auth.permission.public-openapi.policy=permit
quarkus.http.auth.permission.public-health.paths=/q/health/*,/health
quarkus.http.auth.permission.public-health.policy=permit
quarkus.http.auth.permission.public-metrics.paths=/q/metrics,/metrics
quarkus.http.auth.permission.public-metrics.policy=permit
quarkus.http.auth.permission.public-dev.paths=/q/dev*
quarkus.http.auth.permission.public-dev.policy=permit

# ============================================
# OPENAPI / SWAGGER
# ============================================
quarkus.smallrye-openapi.info-title=URL Shortener API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API for URL shortening service
quarkus.smallrye-openapi.info-contact-name=alijonov
quarkus.smallrye-openapi.info-contact-email=alijonov@mk.com

# Swagger UI Config
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.enable=true
quarkus.swagger-ui.path=/q/swagger-ui
quarkus.swagger-ui.title=URL Shortener API


# ============================================
# LOGGING
# ============================================
quarkus.log.level=INFO
quarkus.log.category."com.example".level=DEBUG
quarkus.log.category."io.quarkus".level=INFO
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.console.color=true

# ============================================
# METRICS (Prometheus)
# ============================================
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics

# ============================================
# APPLICATION-SPECIFIC CONFIG
# ============================================
app.base-url=https://shortener.by
app.short-code.length=6
app.short-code.max-attempts=10
app.cache.url-ttl=3600
app.rate-limit.shorten=10
app.rate-limit.redirect=1000
app.pulsar.topic=persistent://public/default/click-events
